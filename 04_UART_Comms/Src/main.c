/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE for Visual Studio Code Extension
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2025 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include <stdint.h>
#include "gpio.h"


/* LED button press using custom GPIO functions. LED pins on DISC1 board are between GPIOD P12-P16 
and GPIOA pin zero connects to the user button on the board*/

int main(void)
{
    uint8_t readGpioPinZero = 0;
    /* LED pins on DISC1 board PD12-PD16 */
    uint8_t gpioPin12 = 12U;
    uint8_t gpioPin0 = 0U;

    /* Buttons on DISC1 board USR - PA0*/

    /* Enable GPIOA clock */
    configureGpioAClk();

    /* Enable GPIOD clock */
    configureGpioDClk();

    /* Set PD12 as output on GPIOD */
    setGpioMode(GPIOD, gpioPin12, OUTPUT);

    /* Set PA0 as input */
    setGpioMode(GPIOA, gpioPin0, INPUT);

    /* Loop forever */
	while(1)
    {   
        /* Read status of GPIOA pin Zero*/
        readGpioPinZero = getGpioPinData(GPIOA, gpioPin0);
        if(readGpioPinZero == RESET)
        {
            /* Turn off LEDs PD12 */
            gpioOutputSetReset(GPIOD, gpioPin12, RESET);
        }
        else {
            /* Turn on LEDs PD12 */
            gpioOutputSetReset(GPIOD, gpioPin12, SET);      
        }
    };

    return 0;
}
